<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authentification - FITVERSE</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">


    <style>
        .btn-primary {
            background-color: #9FF856 !important;
            border-color: #9FF856 !important;
            color: #2D3B10 !important;
            /* Adjust text color for better contrast */
        }

        .btn-primary:hover {
            background-color: #89E347 !important;
            border-color: #7DD137 !important;
        }

        .btn-primary:active,
        .btn-primary:focus {
            background-color: #6BBF30 !important;
            border-color: #5EA827 !important;
        }

        .bg-primary {
            background-color: #9FF856 !important;
        }

        .text-primary {
            color: #9FF856 !important;
        }
    </style>




    <!-- Vue.js -->
    <script src="https://cdn.jsdelivr.net/npm/vue@3.2.47/dist/vue.global.min.js"></script>

    <!-- Less CSS pre-processor -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/less.js/4.2.2/less.min.js"
    integrity="sha512-RvWSOL32duQKqvfcdl2aKktT2VHgL1Nst/cO7EzPhuuVSMKDu86eXkAEi9AUJjSzcpA4XZfK8EaPNNzIP7MlBw=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <style>
        .nav-tabs {
            margin-bottom: 20px;
            border-bottom: none;
        }

        .nav-tabs .nav-link {
            border: none;
            color: #6c757d;
            font-weight: 500;
            padding: 10px 20px;
            transition: color 0.3s;
        }

        .nav-tabs .nav-link.active {
            color: black;
            background-color: transparent;
            border-bottom: 2px solid black;
        }

        .nav-tabs .nav-link:hover:not(.active) {
            color: black;
            cursor: pointer;
            border-color: #e9ecef #e9ecef #ddd;
        }

        .form-control:focus,
        .form-select:focus,
        .form-check-input:focus {
            border-color: #d1d1d1;
            /* Light gray border */
            box-shadow: 0 0 0 0.25rem rgba(209, 209, 209, 0.25);
            /* White-grayish shadow */
        }
    </style>
    
    <style>
        .auth-container {
            max-width: 400px;
            margin: 50px auto;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            color: black;
        }

        .auth-wrapper{
           width: 60rem;
           display: grid;
           background-image: url("auth/form-overlay.jpg");
           backdrop-filter: blur(16px);
           background-size: cover;
           border-radius: 1.33rem;
           grid-template-columns: 1fr 2fr;
           justify-content: center;
           margin: 5rem auto;  
           color: white;
           padding: 2rem;

        }

        .auth-side {

            position: relative;
            top: 3rem;

            a{

                img{
                width: 20rem;
                margin-bottom: .33rem;
                
            }
        }
        }
    </style>
</head>

<body>


    <div class="auth-wrapper">
        <div class="auth-side">
           <a href=""> <img src="fitverse.png" alt=""></a>
<p>Enter your credentials to access your account and get started.</p>
        </div>
        <div id="app" class="container">
            <div class="auth-container bg-white">



                <!-- Tabs Navigation -->
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a class="nav-link" :class="{ active: isLogin }" @click="switchToLogin">Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" :class="{ active: !isLogin }" @click="switchToRegister">Register</a>
                    </li>
                </ul>

                <form @submit.prevent="submitForm">
                    <!-- Show name field only for registration -->
                    <div class="mb-3" v-if="!isLogin">
                        <label for="name" class="form-label">Full Name</label>
                        <input type="text" class="form-control" id="name" v-model="formData.name" required>
                    </div>

                    <div class="mb-3">
                        <label for="email" class="form-label">Email address</label>
                        <input type="email" class="form-control" id="email" v-model="formData.email" required>
                    </div>

                    <div class="mb-3">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" class="form-control" id="password" v-model="formData.password" required>
                        <small class="text-muted" v-if="!isLogin">Minimum 6 characters</small>
                    </div>

                    <!-- Show confirm password only for registration -->
                    <div class="mb-3" v-if="!isLogin">
                        <label for="confirmPassword" class="form-label">Confirm Password</label>
                        <input type="password" class="form-control" id="confirmPassword"
                            v-model="formData.confirmPassword" required>
                    </div>

                    <button type="submit" class="btn btn-primary w-100">
                        {{ isLogin ? 'Login' : 'Register' }}
                    </button>
                </form>

                <!-- Alert for showing messages -->
                <div class="alert mt-3" :class="alertClass" v-if="showAlert">
                    {{ alertMessage }}
                </div>
            </div>
        </div>
    </div>


    <script>
        const { createApp, ref, onMounted } = Vue;

        createApp({
            setup() {
                const isLogin = ref(true);
                const showAlert = ref(false);
                const alertMessage = ref('');
                const alertClass = ref('alert-info');

                const formData = ref({
                    name: '',
                    email: '',
                    password: '',
                    confirmPassword: ''
                });

                // Function to get URL parameters
                const getUrlParameter = (name) => {
                    name = name.replace(/[\[\]]/g, '\\$&');
                    const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
                    const results = regex.exec(window.location.href);
                    if (!results) return null;
                    if (!results[2]) return '';
                    return decodeURIComponent(results[2].replace(/\+/g, ' '));
                };

                // Check URL parameter on component mount
                onMounted(() => {
                    const action = getUrlParameter('action');
                    if (action === 'register') {
                        switchToRegister();
                    } else if (action === 'login') {
                        switchToLogin();
                    }
                });

                const switchToLogin = () => {
                    isLogin.value = true;
                    resetForm();
                    updateUrl('login');
                };

                const switchToRegister = () => {
                    isLogin.value = false;
                    resetForm();
                    updateUrl('register');
                };

                // Update URL without reloading the page
                const updateUrl = (action) => {
                    const url = new URL(window.location);
                    url.searchParams.set('action', action);
                    window.history.pushState({}, '', url);
                };

                const resetForm = () => {
                    formData.value = {
                        name: '',
                        email: '',
                        password: '',
                        confirmPassword: ''
                    };
                    hideAlert();
                };

                const showAlertMessage = (message, type = 'info') => {
                    alertMessage.value = message;
                    alertClass.value = `alert-${type}`;
                    showAlert.value = true;

                    // Hide alert after 5 seconds
                    setTimeout(hideAlert, 5000);
                };

                const hideAlert = () => {
                    showAlert.value = false;
                };

                const submitForm = () => {
                    if (isLogin.value) {
                        // Login logic
                        if (!formData.value.email || !formData.value.password) {
                            showAlertMessage('Please fill in all fields', 'danger');
                            return;
                        }

                        // Simulate API call
                        setTimeout(() => {
                            showAlertMessage('Login successful!', 'success');
                            // Reset form after successful login
                            resetForm();
                        }, 1000);
                    } else {
                        // Registration logic
                        if (!formData.value.name || !formData.value.email || !formData.value.password || !formData.value.confirmPassword) {
                            showAlertMessage('Please fill in all fields', 'danger');
                            return;
                        }

                        if (formData.value.password.length < 6) {
                            showAlertMessage('Password must be at least 6 characters', 'danger');
                            return;
                        }

                        if (formData.value.password !== formData.value.confirmPassword) {
                            showAlertMessage('Passwords do not match', 'danger');
                            return;
                        }

                        // Simulate API call
                        setTimeout(() => {
                            showAlertMessage('Registration successful! You can now login.', 'success');
                            // Switch to login form after successful registration
                            switchToLogin();
                        }, 1000);
                    }
                };

                return {
                    isLogin,
                    formData,
                    showAlert,
                    alertMessage,
                    alertClass,
                    switchToLogin,
                    switchToRegister,
                    submitForm
                };
            }
        }).mount('#app');
    </script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>