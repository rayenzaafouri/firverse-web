{# templates/back/user/index.html.twig #}
{% extends 'back/base.html.twig' %}

{% block title %}Users Listing{% endblock %}

{% block page_title %}User Management{% endblock %}

{% block body %}
    <div style="display:flex; justify-content: space-between; align-items:center; margin-bottom: 1.5rem;">
        <h2 style="color: #2d3e50;">All Users</h2>
        <a href="{{ path('app_user_new') }}" style="background: #1abc9c; color: #fff; padding: 0.6rem 1.2rem; border-radius: 0.3rem; text-decoration: none; transition: background 0.3s;">+ New User</a>
    </div>

    <div style="overflow-x: auto;">
        <table style="width: 100%; border-collapse: separate; border-spacing: 0 0.5rem;">
            <thead>
                <tr>
                    {% set headers = ['#', 'Name', 'Email', 'Phone', 'Role', 'Birth Date', 'Avatar', 'Actions'] %}
                    {% for h in headers %}
                        <th style="background: #34495e; color: #ecf0f1; padding: 0.8rem 1rem; text-align: left;">{{ h }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                    <tr style="background: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.05); transition: transform 0.2s;">
                        <td style="padding: 0.8rem 1rem;">{{ user.id }}</td>
                        <td style="padding: 0.8rem 1rem; font-weight: 500;">{{ user.firstName }} {{ user.lastName }}</td>
                        <td style="padding: 0.8rem 1rem;">{{ user.email }}</td>
                        <td style="padding: 0.8rem 1rem;">{{ user.phone }}</td>
                        <td style="padding: 0.8rem 1rem;">{{ user.role }}</td>
                        <td style="padding: 0.8rem 1rem;">{{ user.birthDate ? user.birthDate|date('Y-m-d') : '—' }}</td>
                        <td style="padding: 0.8rem 1rem;"><br>
                            {% if user.image %}
                                <img src="{{ asset('profile_images/' ~ user.image) }}" alt="Avatar" style="width:40px; height:40px; border-radius:50%; object-fit:cover;">
                            {% else %}
                                <span style="color:#7f8c8d; font-style:italic;">No Image</span>
                            {% endif %}
                        </td>
                        <td style="padding: 0.8rem 1rem; display:flex; gap:0.4rem;">
                            <a href="{{ path('app_user_show', {'id': user.id}) }}" title="View" style="display:inline-block; padding:0.4rem; border-radius:50%; background:#ecf0f1; transition: background 0.3s;">🔍</a>
                            <a href="{{ path('app_user_edit', {'id': user.id}) }}" title="Edit" style="display:inline-block; padding:0.4rem; border-radius:50%; background:#ecf0f1; transition: background 0.3s;">✏️</a>
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="8" style="text-align:center; padding:1rem; color:#7f8c8d;">No users found.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
