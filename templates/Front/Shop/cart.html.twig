{% extends 'base.html.twig' %}

{% block title %}My Cart{% endblock %}

{% block body %}
{% include 'navbar.html.twig' %}

<body data-context="shop">
{# data-context value should be one of the values "exercise","gym","events","shop","nutrition" or "user" depending on your module  #}

<div class="container">
    {% for message in app.flashes('success') %}
        <div class="alert alert-success">
            {{ message }}
        </div>
    {% endfor %}

    {% if cartItems is not empty %}
        <div class="table-responsive ">
            <table class="table border-none">
                <thead>
                    <tr>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th>Price</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in cartItems %}
                        <tr>
                            <td><img src="{{ item.product.imageUrl }}" alt="{{ item.product.name }}"  width="80"></td>
                            <td>{{ item.product.name }}</td>
                            <td class="d-flex align-items-center">
                               <div class="d-inline-flex align-items-center border border-warning rounded-pill px-4 py-1" style="background-color: white; border-radius: 200rem !important;border-width: 3px !important;"> 
                                    <a href="{{ path('cart_decrease', {'id': item.product.id}) }}" class="text-dark text-decoration-none font-weight-bold" style="font-size: 1rem; line-height: 1;">-</a>
                                    <span class="mx-3 font-weight-bold" style="font-size: 1.3rem; line-height: 1;">{{ item.quantity }}</span>
                                    <a href="{{ path('cart_increase', {'id': item.product.id}) }}" class="text-dark text-decoration-none font-weight-bold" style="font-size: 1rem; line-height: 1;">+</a>
                                </div>
                            </td>
                            <td>
                                <a href="{{ path('cart_remove', {'id': item.product.id}) }}" >Remove</a>
                            </td>
                            <td>{{ item.product.price }} TND</td>

                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="text-right font-weight-bold mt-4">
            Subtotal ({{ cartItems|length }} items): {{ total|number_format(2) }} TND
        </div>
    {% else %}
        <p class="text-center text-muted">Your cart is empty.</p>
    {% endif %}
</div>

</body>
{% endblock %}
